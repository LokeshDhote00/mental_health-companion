<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="static/admin.css">
</head>
<body>

<!-- SIDEBAR -->
<div class="sidebar">
    <h2>Admin</h2>
    <a href="#dashboard">Dashboard</a>
    <a href="#users">Users</a>
    <a href="#chat-history">Chat History</a>
    <a href="#reports">Reports</a>
    <a href="#settings">Settings</a>
    <a href="/logout">Logout</a>
</div>


<!-- MAIN CONTENT -->
<div class="main">

    <div class="header">
        <h1>Admin Dashboard</h1>
    </div>

    <!-- ---------- DASHBOARD ---------- -->
    <div id="dashboard" class="section">
        <div class="cards">
            <div class="card">
                <h3>ðŸ’¬ Total Chats</h3>
                <p>{{ total_chats }}</p>
            </div>

            <div class="card">
                <h3>ðŸ‘¤ Total Users</h3>
                <p>{{ total_users }}</p>
            </div>

            <div class="card">
                <h3>ðŸ“… Todayâ€™s Chats</h3>
                <p>{{todays_chats}}</p>
            </div>

            <div class="card">
                <h3>ðŸš¨ Reports</h3>
                <p>0</p>
            </div>
        </div>
    </div>


    <!-- ---------- USERS ---------- -->
    <div id="users" class="section">
        <h2 class="table-title">User List</h2>

        <table>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Remove</th>
                <th>View</th>
            </tr>

            {% for u in users %}
            <tr>
                 <td>{{ u.name }}</td>
                <td>{{ u.email }}</td>
                <td>
                <form action="/delete_user/{{ u.id }}" method="POST">
                  <button class="delete-btn">Delete</button>
                </form>
                </td>
               <td>
    <a href="/user_history/{{ u.id }}">
        <button type="button" class="delete-btn1">View</button>
    </a>
</td>
            </tr>
            {% endfor %}
        </table>
    </div>


    <!-- ---------- CHAT HISTORY ---------- -->
    <div id="chat-history" class="section">
        <h2 class="table-title">Chat History</h2>

        <table>
            <tr>
                <th>User Name</th>
                <th>User ID</th>
                <th>Message</th>
                <th>Time</th>
            </tr>

            {% for c in history %}
            <tr>
                <td>{{ c.name }}</td>
                <td>{{ c.user_id }}</td>
                <td>{{ c.user_message }}</td>
                <td>{{ c.created_at }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
</div>

</body>
</html>
